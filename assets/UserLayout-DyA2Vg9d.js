import{u as j,r as n,c as C,C as N,o as A,D as P,b as S,h as o,e as T,i as z,f as a,d as q,n as E,g as c,t as U,l as G,E as B,m as W,q as F,s as g}from"./index-CXv7rLUD.js";import{u as H,U as J,S as K,a as Q}from"./SettingsModal-BlmBuS4D.js";import{_ as Z,C as ee,a as te}from"./DesktopSidebar-545UbieV.js";import{M as ae}from"./menu-BRnXEa75.js";import{L as se}from"./x-8JbOQflj.js";import"./createLucideIcon-BiMnmHwa.js";import"./house-Dzr1_4yv.js";import"./search-OdsowebE.js";import"./map-pin-Gz82F18W.js";import"./useBranding-3xigf-JK.js";const re={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},ne={class:"flex items-center justify-between h-full px-4"},oe={class:"flex items-center gap-4"},le={class:"text-xl font-semibold text-gray-900 dark:text-white"},ie={class:"relative"},ue={class:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center"},ce={class:"text-sm font-medium text-gray-700 dark:text-gray-300 hidden md:block"},we={__name:"UserLayout",setup(de){const h=N(),m=F(),f=j(),D=H(),r=n(!1),i=n(!1),v=n(null),b=n(null),d=C(()=>typeof window<"u"?window.innerWidth>=1024:!1),I=C(()=>({"/":"Inicio","/app/categories":"Categorías","/app/search":"Buscar","/app/map":"Mapa","/app/profile":"Perfil"})[h.path]||"Tu Mercadito"),y=n(0),x=n(0),k=n(0),w=n(0),u=n(null),p=[{path:"/",name:"home"},{path:"/app/categories",name:"categories"},{path:"/app/search",name:"search"},{path:"/app/map",name:"map"},{path:"/app/profile",name:"profile"}],L=()=>p.findIndex(e=>e.path===h.path),$=e=>{y.value=e.changedTouches[0].screenX,x.value=e.changedTouches[0].screenY,u.value=null},V=e=>{k.value=e.changedTouches[0].screenX,w.value=e.changedTouches[0].screenY,X()},X=()=>{if(d.value)return;const e=y.value-k.value,t=x.value-w.value;if(Math.abs(e)>Math.abs(t)&&Math.abs(e)>50){const s=L();if(s===-1)return;let l=s;if(e>0?(u.value="left",l=Math.min(s+1,p.length-1)):(u.value="right",l=Math.max(s-1,0)),l!==s){m.push(p[l].path);return}}u.value=null},Y=()=>{i.value=!i.value},O=()=>{D.openSettings(),i.value=!1},R=()=>{f.logout(),m.push("/"),i.value=!1,r.value=!1},_=e=>{const t=v.value,s=b.value;t&&t.contains(e.target)||s&&s.contains(e.target)||(i.value=!1)};return A(()=>{document.addEventListener("click",_)}),P(()=>{document.removeEventListener("click",_)}),(e,t)=>{var l;const s=W("RouterView");return g(),S("div",re,[o(Z,{"is-open":r.value,onClose:t[0]||(t[0]=M=>r.value=!1)},null,8,["is-open"]),d.value?(g(),S("header",{key:0,class:E(["fixed top-0 left-0 right-0 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm z-20 lg:pl-0",{"lg:ml-64":r.value}])},[a("div",ne,[a("div",oe,[a("button",{onClick:t[1]||(t[1]=M=>r.value=!r.value),class:"p-2 -ml-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[o(c(ae),{size:20,class:"text-gray-600 dark:text-gray-400"})]),a("h1",le,U(I.value),1)]),a("div",ie,[a("button",{ref_key:"userMenuButton",ref:b,onClick:G(Y,["stop"]),class:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[a("div",ue,[o(c(J),{size:16,class:"text-primary-600 dark:text-primary-400"})]),a("span",ce,U(((l=c(f).currentUser)==null?void 0:l.name)||"Usuario"),1),o(c(ee),{size:16,class:"text-gray-500 dark:text-gray-400"})],512),z(a("div",{ref_key:"userMenu",ref:v,class:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50"},[a("button",{onClick:O,class:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left"},[o(c(K),{size:16}),t[3]||(t[3]=a("span",null,"Ajustes",-1))]),a("button",{onClick:R,class:"flex items-center gap-3 w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[o(c(se),{size:16}),t[4]||(t[4]=a("span",null,"Cerrar Sesión",-1))])],512),[[B,i.value]])])])],2)):T("",!0),z(a("div",{onClick:t[2]||(t[2]=M=>r.value=!1),class:"fixed inset-0 bg-black/50 z-30 lg:hidden"},null,512),[[B,r.value&&d.value]]),a("main",{class:E(["pb-20 transition-all duration-300 ease-out",{"lg:ml-64":r.value,"pt-16":d.value,"animate-slide-left":u.value==="left","animate-slide-right":u.value==="right"}]),onTouchstart:$,onTouchend:V},[o(s),o(Q)],34),d.value?T("",!0):(g(),q(te,{key:1}))])}}};export{we as default};
