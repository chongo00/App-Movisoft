import{u as R,r as n,z as C,A,B as N,C as P,c as S,f as o,b as z,g as T,d as a,a as G,n as B,e as c,t as E,j as W,D as U,k as q,m as F,o as g}from"./index-DqKz071s.js";import{u as H,U as J,S as K,a as Q}from"./SettingsModal-DGhtP8Ct.js";import{_ as Z,C as ee,a as te}from"./DesktopSidebar-CPLe63YQ.js";import{M as ae}from"./menu-Bryl8Afq.js";import{L as se}from"./x-DT1N6cob.js";import"./createLucideIcon-DV2k1qoL.js";import"./house-CkPfF4Ga.js";import"./search-DGPMOqKw.js";import"./map-pin-CVQRKC8D.js";import"./useBranding-uPvca3EF.js";const re={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},ne={class:"flex items-center justify-between h-full px-4"},oe={class:"flex items-center gap-4"},le={class:"text-xl font-semibold text-gray-900 dark:text-white"},ue={class:"relative"},ie={class:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center"},ce={class:"text-sm font-medium text-gray-700 dark:text-gray-300 hidden md:block"},we={__name:"UserLayout",setup(de){const h=A(),m=F(),f=R(),D=H(),r=n(!1),u=n(!1),v=n(null),b=n(null),d=C(()=>typeof window<"u"?window.innerWidth>=1024:!1),I=C(()=>({"/":"Inicio","/app/categories":"Categorías","/app/search":"Buscar","/app/map":"Mapa","/app/profile":"Perfil"})[h.path]||"Tu Mercadito"),y=n(0),x=n(0),k=n(0),w=n(0),i=n(null),p=[{path:"/",name:"home"},{path:"/app/categories",name:"categories"},{path:"/app/search",name:"search"},{path:"/app/map",name:"map"},{path:"/app/profile",name:"profile"}],L=()=>p.findIndex(e=>e.path===h.path),$=e=>{y.value=e.changedTouches[0].screenX,x.value=e.changedTouches[0].screenY,i.value=null},V=e=>{k.value=e.changedTouches[0].screenX,w.value=e.changedTouches[0].screenY,X()},X=()=>{if(d.value)return;const e=y.value-k.value,t=x.value-w.value;if(Math.abs(e)>Math.abs(t)&&Math.abs(e)>50){const s=L();if(s===-1)return;let l=s;if(e>0?(i.value="left",l=Math.min(s+1,p.length-1)):(i.value="right",l=Math.max(s-1,0)),l!==s){m.push(p[l].path);return}}i.value=null},Y=()=>{u.value=!u.value},j=()=>{D.openSettings(),u.value=!1},O=()=>{f.logout(),m.push("/"),u.value=!1,r.value=!1},_=e=>{const t=v.value,s=b.value;t&&t.contains(e.target)||s&&s.contains(e.target)||(u.value=!1)};return N(()=>{document.addEventListener("click",_)}),P(()=>{document.removeEventListener("click",_)}),(e,t)=>{var l;const s=q("RouterView");return g(),S("div",re,[o(Z,{"is-open":r.value,onClose:t[0]||(t[0]=M=>r.value=!1)},null,8,["is-open"]),d.value?(g(),S("header",{key:0,class:B(["fixed top-0 left-0 right-0 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm z-20 lg:pl-0",{"lg:ml-64":r.value}])},[a("div",ne,[a("div",oe,[a("button",{onClick:t[1]||(t[1]=M=>r.value=!r.value),class:"p-2 -ml-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[o(c(ae),{size:20,class:"text-gray-600 dark:text-gray-400"})]),a("h1",le,E(I.value),1)]),a("div",ue,[a("button",{ref_key:"userMenuButton",ref:b,onClick:W(Y,["stop"]),class:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[a("div",ie,[o(c(J),{size:16,class:"text-primary-600 dark:text-primary-400"})]),a("span",ce,E(((l=c(f).currentUser)==null?void 0:l.name)||"Usuario"),1),o(c(ee),{size:16,class:"text-gray-500 dark:text-gray-400"})],512),T(a("div",{ref_key:"userMenu",ref:v,class:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50"},[a("button",{onClick:j,class:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left"},[o(c(K),{size:16}),t[3]||(t[3]=a("span",null,"Ajustes",-1))]),a("button",{onClick:O,class:"flex items-center gap-3 w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[o(c(se),{size:16}),t[4]||(t[4]=a("span",null,"Cerrar Sesión",-1))])],512),[[U,u.value]])])])],2)):z("",!0),T(a("div",{onClick:t[2]||(t[2]=M=>r.value=!1),class:"fixed inset-0 bg-black/50 z-30 lg:hidden"},null,512),[[U,r.value&&d.value]]),a("main",{class:B(["pb-20 transition-all duration-300 ease-out",{"lg:ml-64":r.value,"pt-16":d.value,"animate-slide-left":i.value==="left","animate-slide-right":i.value==="right"}]),onTouchstart:$,onTouchend:V},[o(s),o(Q)],34),d.value?z("",!0):(g(),G(te,{key:1}))])}}};export{we as default};
